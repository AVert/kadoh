<html>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="../../dist/KadOH.js"></script>

<script type="text/javascript">
$(function() {
  var KadOH = window.KadOH;
  window.node = new KadOH.Node(null, {
    reactor: {
      host: 'http://bosh.melo.fr.nf/http-bind',
      transport: {
        jid: 'kadoh@jabber.org',
        password: 'azerty'
      }
    }
  });
  KadOH.log.subscribeTo(node, 'Node');
  KadOH.log.subscribeTo(node._reactor, 'Reactor')
  KadOH.log.subscribeTo(node._reactor._transport, 'Transport');

  function init(event) {
    node.join(['alexstrat@jabber.org', 'jinroh@jabber.org']);
    event.preventDefault();
  }

  function ping(event) {
    try {
      var dst = $('#ping_dst').val();
      node.reactor().PING(new KadOH.Peer(dst));
    }
    catch(e) {
      console.error(e);
    }
    finally {
      event.preventDefault();
    }
  }

  $('#join').click(init);
  $('#ping').click(ping);
});
</script>
<body>
<h2>Send message to node :</h2>
<form id='form'>
  <p>
    <input type="submit" value="Join" name="join" id="join">
  </p>
  <p>
    <input type="text" name="ping_dst" id="ping_dst" value=""> 
    <input type="submit" value="Ping" name="ping" id="ping">
  </p>
</form>
</body>
</html>
