<html>
<script src="/script.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

<script>
$(function() {
  // socket = io.connect();
  sudp = new KadOH.transport.SimUDP();
  
  sudp.socket.on('clients-up', function(msg) {
    $('#form>select').empty().append('<option value="all">All</option>');
    for(ip in msg) {
      $('#form>select').append('	<option value="' + ip + '">' + ip + '</option>');
    }
  });

  sudp.listen( function(msg) {
    console.log(msg)
    $('#received').append('<p><b>' + msg.src + '</b> : ' + msg.msg + '</p');
  });
  
  $('#form').submit(function(event){
    try {
         var msg = $('#form > input[name=text]').val();
         var dst = $('#form>[name=dest]').val(); // IP:PORT
      
         sudp.send(dst, msg);
       } catch(e){console.log(e);}
  
    return false;

  });
});
</script>
<body>
<h2>Send message to node :</h2>
<form id='form'>
  <select name='dest'>
    <option value='all'>All</option>
  </select>
  <input type=text name='text'>
  <input type="submit" value="Send">
</form>
<h2>Messages received :</h2>
<div id='received'></div>
</body>
</html>
