<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>KadOH</title>
   <script type="text/javascript" src="jquery/jquery-1.7.js"></script>
   <script type="text/javascript" src="/dist/KadOH.js"></script>
  <script type="text/javascript" src="UI/js/vendor/jquery.timeago.js"></script>
  <script type="text/javascript" src="UI/js/vendor/bootstrap-tabs.js"></script>
  <script type="text/javascript" src="UI/js/vendor/bootstrap-twipsy.js"></script>
  <script type="text/javascript" src="UI/js/vendor/bootstrap-popover.js"> </script>
  <script type="text/javascript" src="UI/js/vendor/bootstrap-buttons.js"></script>
  <script type="text/javascript" src="UI/js/kadohui.js"></script>
  <script type="text/javascript" src="UI/js/Log.js"></script>
  <script type="text/javascript" src="UI/js/routing.js"></script>
  <link rel="stylesheet" type="text/css" href="UI/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="UI/css/KadOHUI.css" media="all">

  <script type="text/javascript">
  // SOME BULLSHIT JS TO BE REPLACED IN kadohui.js
  $(function() { KadOHui.init();
     
    var inputs     = $("#credentials input");
    var transport  = $("select.transport");
    var jidInput   = $("#jid");
    var pswdInput  = $("#password");
    var connection = $("#connection");
    var connectBtn = $("#connection input[name=connect]");
    var joinBtn    = $("#connection input[name=join]");

    var options = {
    reactor : {
      protocol  : 'jsonrpc2',
      host      : 'localhost',
      type      : 'SimUDP',
      transport : {
        transports : [
                      //'websocket', 
                      'flashsocket', 
                      'htmlfile', 
                      'xhr-multipart', 
                      'xhr-polling', 
                      'jsonp-polling'
                      ]
      }
    }
  };

  node = new KadOH.Node(undefined, options);
  KadOH.log.setLevel('debug');
  KadOH.log.subscribeTo(node, 'Node');
  KadOH.log.subscribeTo(node.reactor(), 'Reactor');
  KadOH.log.subscribeTo(node.reactor()._transport, 'Transport');
  KadOH.log.subscribeTo(node._routingTable, 'RoutingTable');

  logger = new KadOHui.Logger('#log .console', '#log .control');
  KadOH.log.addLogger('UILogger', logger);

  routing = new KadOHui.Routing(node._routingTable, '#routing-table');



  function onClickJoin(event) {
    try {
      var bootstraps = ['67.215.242.139:6881', '67.215.242.138:6881'];
      node.connect();
      node.join(bootstraps);
    } catch(e) {
      console.error(e.stack);
    }
    event.preventDefault();
  }

  joinBtn.click(onClickJoin);
});
    
  </script>
</head>
<body>

  <div class="container">
    <div class="topbar">
      <div class="fill">
        <div class="container"><a href="#" class="brand">KadOH</a></div>
      </div>
    </div>
    <div id="content">

      <div class="page-header">
        <div id="connection-control">
          <div class="row">
            <div class="span2">
              <select class="span2 transport">
                <option value="SimUDP">Mainline</option>
                <option value="XMPP">XMPP</option>
              </select>
            </div>
            <div id="credentials" class="span10">
              <input class="span3" type="text"     id="jid"      placeholder="Jabber or GMail login" />
              <input class="span3" type="password" id="password" placeholder="Password" />
            </div>
            <div id="connection" class="span3">
              <input type="submit" class="btn primary"  name="connect" value="Connect" />
              <input type="submit" class="btn" name="join"    value="Join" />
            </div>
          </div>
        </div>
        <ul class="tabs" data-tabs="tabs">
          <li class="active"><a href="#control">Control</a></li>
          <li><a href="#node">Node</a></li>
          <li><a href="#reactor">Reactor</a></li>
          <li><a href="#transport">Transport</a></li>
          <li><a href="#routing-table">Routing Table</a></li>
          <li><a href="#value-management">Value Management</a></li>
          <li><a href="#log">Log</a></li>
        </ul>
      </div>

      <div class="tab-content">
        <div class="active tab-pane" id="control">
          <h3>Control panel</h3>
        </div>
        <div class="tab-pane" id="node">
          <h3>Node</h3>
        </div>
        <div class="tab-pane" id="reactor">
            <span class="state label important">Disconnected</span>
            <h3>Reactor</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adi</p>
            <a href="#" class="btn danger" rel="popover" data-content="And here's some amazing content. It's very engaging. right?" data-original-title="A title" data-placement="below">hover for popover</a>
        </div>
        <div class="tab-pane" id="log">
            <div class="well control">
              <h5>Log level :</h5>
                <label>
                  <img src="UI/css/images/info-icon16.png" alt="info">
                  <input type="checkbox" name="debugLevel" value="info" checked>
                  <span>info</span>
                </label>
                <label>
                  <img src="UI/css/images/warn-icon16.png" alt="warning">
                  <input type="checkbox" name="debugLevel" value="warning" checked>
                  <span>warning</span>
                </label>
                <label>
                  <img src="UI/css/images/error-icon16.png" alt="error">
                  <input type="checkbox" name="debugLevel" value="error" checked>
                  <span>error</span>
                </label>
                <label>
                  <img src="UI/css/images/skull-icon16.png" alt="fatal">
                  <input type="checkbox" name="debugLevel" value="fatal" checked>
                  <span>fatal</span>
                </label>
                <label>
                  <img src="UI/css/images/debug-icon16.png" alt="debug">
                  <input type="checkbox" name="debugLevel" value="debug" checked>
                  <span>debug</span>
                </label>
            </div>
            <div class="console">
            </div>
        </div>
        <div class="tab-pane" id="value-management">
            <h3>Value Management</h3>
        </div>


        <div class="tab-pane" id="routing-table">
          <div class="well">
            <div style="line-height:1em">Routing Table contains a total of <strong>4 peers</strong> in <strong>2 buckets</strong></div>
          </div>
          <div class="console">
          </div>
        </div>


        <div class="tab-pane" id="transport">
          <h3>Transport</h3>
        </div>
      </div>
    </div>

    <footer>
      <p><strong>Pierre Guilleminot</strong> &amp; <strong>Alexandre Lacheze</strong></p>
      <p><a href="https://github.com/jinroh/kadoh">KadOH on Github</a></p>
    </footer>
  </div>
</body>
</html>