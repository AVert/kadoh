#!/usr/bin/env node

// @TODO
// Main CLI

var Hook = require('hook.io').Hook;
process.listening = true;
var spawner = new Hook({
  name: 'spawner'
});

var bootstraps = [];

spawner.on('hook::ready', function() {
  spawner.on('*::connected', function(address) {
    bootstraps.push(address);
  });

  spawner.on('*::bootstraps', function() {
    this.emit('bootstraps', ['jinroh@jabber.org/kadoh', 'alexstrat@jabber.org/kadoh']);
  });

  require('repl').start('> ').context.spawner = spawner;
});

spawner.disconnectNodes = function() {
  this.emit('disconnect-nodes');
};

spawner.start();